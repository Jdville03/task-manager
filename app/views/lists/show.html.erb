<div class="row">
  <div class="col-md-4">
    <div class="panel panel-info">
      <div class="panel-heading">
        <strong><span class="glyphicon glyphicon-dashboard" aria-hidden="true"></span> <%= @list.name %></strong>
        <span class="glyphicon glyphicon-pencil pull-right" aria-hidden="true"></span>
      </div>
      <div class="list-group">
        <% if @list.shared_list? %>
          <table class="table table-condensed list-group-item">
            <caption>Users</caption>
            <% @list.users.each do |user| %>
              <tr>
                <td>
                  <% if user == current_user %>
                    <span class="glyphicon glyphicon-user text-primary" aria-hidden="true"></span>
                  <% else %>
                    <span class="badge progress-bar-success"><%= user_initial(user) %></span>
                  <% end %>
                </td>
                <td>
                  <%= user.name %>
                  <% if @list.user_permission(user) == "owner" %>
                    <span class="label label-<%= user_class(user) %>">owner</span>
                  <% end %>
                </td>
              </tr>
            <% end %>
          </table>
        <% end %>
        <a href="#" class="list-group-item">
          <span class="badge"><%= number_of_incomplete_tasks(@list) %></span>
          <span class="glyphicon glyphicon-unchecked" aria-hidden="true"></span> All
        </a>
        <% if @list.shared_list? && @list.tasks.incomplete.assigned_to_user(current_user).any? %>
          <a href="#" class="list-group-item">
            <span class="badge"><%= number_of_incomplete_tasks_assigned_to_user(@list, current_user) %></span>
            <span class="glyphicon glyphicon-user text-primary" aria-hidden="true"></span> Assigned to me
          </a>
        <% end %>
        <a href="#" class="list-group-item">
          <span class="badge">2</span>
          <span class="glyphicon glyphicon-flag text-danger" aria-hidden="true"></span> Important
        </a>
        <a href="#" class="list-group-item">
          <span class="badge">3</span>
          <span class="glyphicon glyphicon-time text-danger" aria-hidden="true"></span> Overdue
        </a>
        <a href="#" class="list-group-item">
          <span class="badge">4</span>
          <span class="glyphicon glyphicon-calendar text-warning" aria-hidden="true"></span> Due Today
        </a>
      </div>
    </div>
  </div>

  <div class="col-md-8">
    <div class="panel panel-info">
      <div class="panel-heading">
        <strong><span class="glyphicon glyphicon-list-alt" aria-hidden="true"></span> <%= @list.name %></strong>
      </div>
      <div class="list-group">
        <%= form_for @task do |f| %>
          <div class="form-group list-group-item">
            <div class="input-group">
              <span class="input-group-btn">
                <%= button_tag(type: "submit", class: "btn btn-default") do %>
                  <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                <% end %>
              </span>
              <%= f.text_field :description, placeholder: @task.errors.full_messages_for(:description).first || "Create new task", class: "form-control", 'aria-describedby': "new-list-addon" %>
            </div>
            <!-- <%= f.submit :style => "display: none" %> -->
          </div>
        <% end %>
        <% @list.tasks.each do |task| %>
          <a href="<%= task_path(task) %>" class="list-group-item">
            <%= task.description %>
            <% if task.assigned_user %>
              <% if task.assigned_user == current_user %>
                <span class="glyphicon glyphicon-user text-primary pull-right" aria-hidden="true"></span>
              <% else %>
                <span class="badge progress-bar-success"><%= user_initial(task.assigned_user) %></span>
              <% end %>
            <% end %>
          </a>
        <% end %>
      </div>
    </div>
  </div>
</div>
